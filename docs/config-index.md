# Конфигурация системы

### [Оглавление](./index.md)

Система конфигурации устанавливается при инициализации фреймворка и не меняется в пределах проекта

Фреймворк штатно поддерживает системы конфигурирования:
- Mock конфигурация - конфигурация прописана в исходном коде приложения
- .env файлы - минимальная поддержка env структуры, без импорта других файлов
- Авто конфигурация из yaml файла - поддержка плоской пользовательской конфигурации и настройки всех встроенных модулей фреймворка

# Mock конфигурация

Используется в качестве заглушки в коде или тестах

```go
s := Paranoia.New("app", config.NewMock(map[string]string{
	"key": "val",
}), nil)
```

# .env файлы

Получение данных происходит из файла или переменных операционной системы. Возможно указать любое название файла

```go
s := Paranoia.New("app", config.NewEnv(
	config.EnvConfig{FName: ".env.local"},
), nil)
```

# Авто конфигурация

Позволяет инициализировать приложение в зависимости от окружения, загрузка происходит из yaml файла. 

Поддерживается 2 корневых тега: engine - для конфигурации фреймворка и cfg для пользовательской конфигурации.

```go
s := Paranoia.New("app", config.NewAuto(
config.AutoConfig{FName: "local.yaml"},
), nil)
```

Пример файла конфигурации:

```yaml
engine:
  metrics:
    - type: std
      name: example_app
      interval: 30s
  cache:
    - type: memory
      name: cache
      time_clear: 10m

cfg:
  logLevel: WARNING
  key: val
```

`logLevel` из пользовательской конфигурации автоматически применяется при загрузке конфигурации. В блоке `cfg` доступно только плоская структура - без объектов и без массивов

В блоке `engine` следующем уровнем указывается название модуля:
- metrics
- cache
- database
- nosql
- client
- server

Следующем уровнем в качестве массива указываются модули которые будут добавлены во фреймворк. Допускаются повторения модулей, но под уникальным именем в пределах типа пакета.
В описании каждого модуля необходимо обязательно указать тип модуля, его имя и остальные настройки модуля.

### Далее [Логирование](./logger.md)